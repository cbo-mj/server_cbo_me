AmCharts.AmStockChart=AmCharts.Class({construct:function(t){this.type="stock",this.cname="AmStockChart",this.version="3.11.0",this.theme=t,this.createEvents("zoomed","rollOverStockEvent","rollOutStockEvent","clickStockEvent","panelRemoved","dataUpdated","init","rendered","drawn"),this.colors="#FF6600 #FCD202 #B0DE09 #0D8ECF #2A0CD0 #CD0D74 #CC0000 #00CC00 #0000CC #DDDDDD #999999 #333333 #990000".split(" "),this.firstDayOfWeek=1,this.glueToTheEnd=!1,this.dataSetCounter=-1,this.zoomOutOnDataSetChange=!1,this.panels=[],this.dataSets=[],this.chartCursors=[],this.comparedDataSets=[],this.categoryAxesSettings=new AmCharts.CategoryAxesSettings(t),this.valueAxesSettings=new AmCharts.ValueAxesSettings(t),this.panelsSettings=new AmCharts.PanelsSettings(t),this.chartScrollbarSettings=new AmCharts.ChartScrollbarSettings(t),this.chartCursorSettings=new AmCharts.ChartCursorSettings(t),this.stockEventsSettings=new AmCharts.StockEventsSettings(t),this.legendSettings=new AmCharts.LegendSettings(t),this.balloon=new AmCharts.AmBalloon(t),this.previousEndDate=new Date(0),this.previousStartDate=new Date(0),this.dataSetCount=this.graphCount=0,this.chartCreated=!1,this.extendToFullPeriod=!0,AmCharts.applyTheme(this,t,this.cname)},write:function(t){var e=this.theme;AmCharts.applyLang(this.language,this);var a=this.exportConfig;a&&AmCharts.AmExport&&!this.AmExport&&(this.AmExport=new AmCharts.AmExport(this,a)),this.amExport&&AmCharts.AmExport&&(this.AmExport=AmCharts.extend(this.amExport,new AmCharts.AmExport(this),!0)),this.AmExport&&this.AmExport.init(),this.chartRendered=!1,t="object"!=typeof t?document.getElementById(t):t,this.zoomOutOnDataSetChange&&(this.endDate=this.startDate=void 0),this.categoryAxesSettings=AmCharts.processObject(this.categoryAxesSettings,AmCharts.CategoryAxesSettings,e),this.valueAxesSettings=AmCharts.processObject(this.valueAxesSettings,AmCharts.ValueAxesSettings,e),this.chartCursorSettings=AmCharts.processObject(this.chartCursorSettings,AmCharts.ChartCursorSettings,e),this.chartScrollbarSettings=AmCharts.processObject(this.chartScrollbarSettings,AmCharts.ChartScrollbarSettings,e),this.legendSettings=AmCharts.processObject(this.legendSettings,AmCharts.LegendSettings,e),this.panelsSettings=AmCharts.processObject(this.panelsSettings,AmCharts.PanelsSettings,e),this.stockEventsSettings=AmCharts.processObject(this.stockEventsSettings,AmCharts.StockEventsSettings,e),this.dataSetSelector&&(this.dataSetSelector=AmCharts.processObject(this.dataSetSelector,AmCharts.DataSetSelector,e)),this.periodSelector&&(this.periodSelector=AmCharts.processObject(this.periodSelector,AmCharts.PeriodSelector,e)),t.innerHTML="",this.div=t,this.measure(),this.createLayout(),this.updateDataSets(),this.addDataSetSelector(),this.addPeriodSelector(),this.addPanels(),this.updatePanels(),this.addChartScrollbar(),this.updateData(),this.skipDefault||this.setDefaultPeriod()},setDefaultPeriod:function(t){var e=this.periodSelector;e&&(this.animationPlayed=!1,e.setDefaultPeriod(t))},validateSize:function(){var t,e=this.panels;for(this.measurePanels(),t=0;t<e.length;t++)panel=e[t],panel.invalidateSize()},updateDataSets:function(){var t,e=this.mainDataSet,a=this.dataSets;for(t=0;t<a.length;t++){var i=a[t],i=AmCharts.processObject(i,AmCharts.DataSet);a[t]=i,i.id||(this.dataSetCount++,i.id="ds"+this.dataSetCount),void 0===i.color&&(i.color=this.colors.length-1>t?this.colors[t]:AmCharts.randomColor())}!e&&AmCharts.ifArray(a)&&(this.mainDataSet=this.dataSets[0])},updateEvents:function(t){AmCharts.ifArray(t.stockEvents)&&AmCharts.parseEvents(t,this.panels,this.stockEventsSettings,this.firstDayOfWeek,this,this.dataDateFormat)},getLastDate:function(t){var e=this.dataDateFormat;return t=t instanceof Date?new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()):e?AmCharts.stringToDate(t,e):new Date(t),new Date(AmCharts.changeDate(t,this.categoryAxesSettings.minPeriod,1,!0).getTime()-1)},getFirstDate:function(t){var e=this.dataDateFormat;return t=t instanceof Date?new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()):e?AmCharts.stringToDate(t,e):new Date(t),new Date(AmCharts.resetDateToMin(t,this.categoryAxesSettings.minPeriod,1,this.firstDayOfWeek))},updateData:function(){var t=this.mainDataSet;if(t){var e=this.categoryAxesSettings;-1==AmCharts.getItemIndex(e.minPeriod,e.groupToPeriods)&&e.groupToPeriods.unshift(e.minPeriod);var a=t.dataProvider;if(AmCharts.ifArray(a)){var i=t.categoryField;this.firstDate=this.getFirstDate(a[0][i]),this.lastDate=this.getLastDate(a[a.length-1][i]),this.periodSelector&&this.periodSelector.setRanges(this.firstDate,this.lastDate),t.dataParsed||(AmCharts.parseStockData(t,e.minPeriod,e.groupToPeriods,this.firstDayOfWeek,this.dataDateFormat),t.dataParsed=!0),this.updateComparingData(),this.updateEvents(t)}else this.lastDate=this.firstDate=void 0;this.glueToTheEnd&&this.startDate&&this.endDate&&this.lastDate&&(AmCharts.getPeriodDuration(e.minPeriod),this.startDate=new Date(this.startDate.getTime()+(this.lastDate.getTime()-this.endDate.getTime())),this.endDate=this.lastDate,this.updateScrollbar=!0),this.updatePanelsWithNewData()}t={type:"dataUpdated",chart:this},this.fire(t.type,t)},updateComparingData:function(){var t,e=this.comparedDataSets,a=this.categoryAxesSettings;for(t=0;t<e.length;t++){var i=e[t];i.dataParsed||(AmCharts.parseStockData(i,a.minPeriod,a.groupToPeriods,this.firstDayOfWeek,this.dataDateFormat),i.dataParsed=!0),this.updateEvents(i)}},createLayout:function(){var t,e,a=this.div,i=document.createElement("div");i.style.position="relative",this.containerDiv=i,a.appendChild(i),(a=this.periodSelector)&&(t=a.position),(a=this.dataSetSelector)&&(e=a.position),("left"==t||"left"==e)&&(a=document.createElement("div"),a.style.cssFloat="left",a.style.styleFloat="left",a.style.width="0px",a.style.position="absolute",i.appendChild(a),this.leftContainer=a),("right"==t||"right"==e)&&(t=document.createElement("div"),t.style.cssFloat="right",t.style.styleFloat="right",t.style.width="0px",i.appendChild(t),this.rightContainer=t),t=document.createElement("div"),i.appendChild(t),this.centerContainer=t,i=document.createElement("div"),t.appendChild(i),this.panelsContainer=i},addPanels:function(){this.measurePanels();for(var t=this.panels,e=0;e<t.length;e++){var a=t[e],a=AmCharts.processObject(a,AmCharts.StockPanel,this.theme);t[e]=a,this.addStockPanel(a,e)}this.panelsAdded=!0},measurePanels:function(){this.measure();var t=this.chartScrollbarSettings,e=this.divRealHeight,a=this.panelsSettings.panelSpacing;t.enabled&&(e-=t.height),(t=this.periodSelector)&&!t.vertical&&(t=t.offsetHeight,e-=t+a),(t=this.dataSetSelector)&&!t.vertical&&(t=t.offsetHeight,e-=t+a),t=this.panels,this.panelsContainer.style.height=e+"px",this.chartCursors=[];var i,s,r=0;for(i=0;i<t.length;i++){s=t[i];var o=s.percentHeight;isNaN(o)&&(o=100/t.length,s.percentHeight=o),r+=o}for(this.panelsHeight=Math.max(e-a*(t.length-1),0),i=0;i<t.length;i++)s=t[i],s.percentHeight=s.percentHeight/r*100,s.panelBox&&(s.panelBox.style.height=Math.round(s.percentHeight*this.panelsHeight/100)+"px")},addStockPanel:function(t,e){var a=this.panelsSettings,i=document.createElement("div");i.className="amChartsPanel",e>0&&!this.panels[e-1].showCategoryAxis&&(i.style.marginTop=a.panelSpacing+"px"),t.panelBox=i,t.stockChart=this,t.id||(t.id="stockPanel"+e),t.pathToImages=this.pathToImages,i.style.height=Math.round(t.percentHeight*this.panelsHeight/100)+"px",i.style.width="100%",this.panelsContainer.appendChild(i),0<a.backgroundAlpha&&(i.style.backgroundColor=a.backgroundColor),(i=t.stockLegend)&&(i.container=void 0,i.title=t.title,i.marginLeft=a.marginLeft,i.marginRight=a.marginRight,i.verticalGap=3,i.position="top",AmCharts.copyProperties(this.legendSettings,i),t.addLegend(i,i.divId)),t.zoomOutText="",this.addCursor(t)},enableCursors:function(t){var e,a=this.chartCursors;for(e=0;e<a.length;e++)a[e].enabled=t},updatePanels:function(){var t,e=this.panels;for(t=0;t<e.length;t++)this.updatePanel(e[t]);this.mainDataSet&&this.updateGraphs(),this.currentPeriod=void 0},updatePanel:function(t){t.seriesIdField="amCategoryIdField",t.dataProvider=[],t.chartData=[],t.graphs=[];var e=t.categoryAxis,a=this.categoryAxesSettings;AmCharts.copyProperties(this.panelsSettings,t),AmCharts.copyProperties(a,e),e.parseDates=!0,t.zoomOutOnDataUpdate=!1,t.mouseWheelScrollEnabled=this.mouseWheelScrollEnabled,t.dataDateFormat=this.dataDateFormat,t.language=this.language,t.showCategoryAxis?"top"==e.position?t.marginTop=a.axisHeight:t.marginBottom=a.axisHeight:(t.categoryAxis.labelsEnabled=!1,t.chartCursor&&(t.chartCursor.categoryBalloonEnabled=!1));var i,a=t.valueAxes,s=a.length;for(0===s&&(i=new AmCharts.ValueAxis(this.theme),t.addValueAxis(i)),e=new AmCharts.AmBalloon(this.theme),AmCharts.copyProperties(this.balloon,e),t.balloon=e,a=t.valueAxes,s=a.length,e=0;s>e;e++)i=a[e],AmCharts.copyProperties(this.valueAxesSettings,i);t.listenersAdded=!1,t.write(t.panelBox)},zoom:function(t,e){this.zoomChart(t,e)},zoomOut:function(){this.zoomChart(this.firstDate,this.lastDate)},updatePanelsWithNewData:function(){var t=this.mainDataSet,e=this.scrollbarChart;if(t){var a=this.panels;this.currentPeriod=void 0;var i;for(i=0;i<a.length;i++){var s=a[i];s.categoryField=t.categoryField,0===t.dataProvider.length&&(s.dataProvider=[]),s.scrollbarChart=e}e&&(a=this.categoryAxesSettings,i=a.minPeriod,e.categoryField=t.categoryField,0<t.dataProvider.length?(s=this.chartScrollbarSettings.usePeriod,e.dataProvider=s?t.agregatedDataProviders[s]:t.agregatedDataProviders[i]):e.dataProvider=[],s=e.categoryAxis,s.minPeriod=i,s.firstDayOfWeek=this.firstDayOfWeek,s.equalSpacing=a.equalSpacing,s.axisAlpha=0,s.markPeriodChange=a.markPeriodChange,e.bbsetr=!0,e.validateData(),a=this.panelsSettings,e.maxSelectedTime=a.maxSelectedTime,e.minSelectedTime=a.minSelectedTime),0<t.dataProvider.length&&this.zoomChart(this.startDate,this.endDate)}this.panelDataInvalidated=!1},addChartScrollbar:function(){var t=this.chartScrollbarSettings,e=this.scrollbarChart;if(e&&(e.clear(),e.destroy()),t.enabled){var a=this.panelsSettings,i=this.categoryAxesSettings,e=new AmCharts.AmSerialChart(this.theme);e.language=this.language,e.pathToImages=this.pathToImages,e.autoMargins=!1,this.scrollbarChart=e,e.id="scrollbarChart",e.scrollbarOnly=!0,e.zoomOutText="",e.panEventsEnabled=this.panelsSettings.panEventsEnabled,e.marginLeft=a.marginLeft,e.marginRight=a.marginRight,e.marginTop=0,e.marginBottom=0;var a=i.dateFormats,s=e.categoryAxis;if(s.boldPeriodBeginning=i.boldPeriodBeginning,a&&(s.dateFormats=i.dateFormats),s.labelsEnabled=!1,s.parseDates=!0,i=t.graph,AmCharts.isString(i)){for(a=this.panels,s=0;s<a.length;s++){var r=AmCharts.getObjById(a[s].stockGraphs,t.graph);r&&(i=r)}t.graph=i}var o;i&&(o=new AmCharts.AmGraph(this.theme),o.valueField=i.valueField,o.periodValue=i.periodValue,o.type=i.type,o.connect=i.connect,o.minDistance=t.minDistance,e.addGraph(o)),i=new AmCharts.ChartScrollbar(this.theme),e.addChartScrollbar(i),AmCharts.copyProperties(t,i),i.scrollbarHeight=t.height,i.graph=o,this.listenTo(i,"zoomed",this.handleScrollbarZoom),o=document.createElement("div"),o.style.height=t.height+"px",i=this.periodSelectorContainer,a=this.periodSelector,s=this.centerContainer,"bottom"==t.position?a&&"bottom"==a.position?s.insertBefore(o,i):s.appendChild(o):a&&"top"==a.position?s.insertBefore(o,i.nextSibling):s.insertBefore(o,s.firstChild),e.write(o)}},handleScrollbarZoom:function(t){if(this.skipScrollbarEvent)this.skipScrollbarEvent=!1;else{var e=t.endDate,a={};a.startDate=t.startDate,a.endDate=e,this.updateScrollbar=!1,this.handleZoom(a)}},addPeriodSelector:function(){var t=this.periodSelector;if(t){var e=this.categoryAxesSettings.minPeriod;t.minDuration=AmCharts.getPeriodDuration(e),t.minPeriod=e,t.chart=this;var a,i=this.dataSetSelector,e=this.dssContainer;i&&(a=i.position);var i=this.panelsSettings.panelSpacing,s=document.createElement("div");this.periodSelectorContainer=s;var r=this.leftContainer,o=this.rightContainer,n=this.centerContainer,h=this.panelsContainer,l=t.width+2*i+"px";switch(t.position){case"left":r.style.width=t.width+"px",r.appendChild(s),n.style.paddingLeft=l;break;case"right":n.style.marginRight=l,o.appendChild(s),o.style.width=t.width+"px";break;case"top":h.style.clear="both",n.insertBefore(s,h),s.style.paddingBottom=i+"px",s.style.overflow="hidden";break;case"bottom":s.style.marginTop=i+"px","bottom"==a?n.insertBefore(s,e):n.appendChild(s)}this.listenTo(t,"changed",this.handlePeriodSelectorZoom),t.write(s)}},addDataSetSelector:function(){var t=this.dataSetSelector;if(t){t.chart=this,t.dataProvider=this.dataSets;var e=t.position,a=this.panelsSettings.panelSpacing,i=document.createElement("div");this.dssContainer=i;var s=this.leftContainer,r=this.rightContainer,o=this.centerContainer,n=this.panelsContainer,a=t.width+2*a+"px";switch(e){case"left":s.style.width=t.width+"px",s.appendChild(i),o.style.paddingLeft=a;break;case"right":o.style.marginRight=a,r.appendChild(i),r.style.width=t.width+"px";break;case"top":n.style.clear="both",o.insertBefore(i,n),i.style.overflow="hidden";break;case"bottom":o.appendChild(i)}t.write(i)}},handlePeriodSelectorZoom:function(t){var e=this.scrollbarChart;e&&(e.updateScrollbar=!0),t.predefinedPeriod?(this.predefinedStart=t.startDate,this.predefinedEnd=t.endDate):this.predefinedEnd=this.predefinedStart=null,this.zoomChart(t.startDate,t.endDate)},addCursor:function(t){var e=this.chartCursorSettings;if(e.enabled){var a=new AmCharts.ChartCursor(this.theme);AmCharts.copyProperties(e,a),t.chartCursor&&AmCharts.copyProperties(t.chartCursor,a),t.removeChartCursor(),t.addChartCursor(a),this.listenTo(a,"changed",this.handleCursorChange),this.listenTo(a,"onHideCursor",this.hideChartCursor),this.listenTo(a,"zoomed",this.handleCursorZoom),this.chartCursors.push(a)}},hideChartCursor:function(){var t,e=this.chartCursors;for(t=0;t<e.length;t++){var a=e[t];a.hideCursor(!1),(a=a.chart)&&a.updateLegendValues()}},handleCursorZoom:function(t){var e=this.scrollbarChart;e&&(e.updateScrollbar=!0);var a,e={};if(this.categoryAxesSettings.equalSpacing){var i=this.mainDataSet.categoryField,s=this.mainDataSet.agregatedDataProviders[this.currentPeriod];a=new Date(s[t.start][i]),t=new Date(s[t.end][i])}else a=new Date(t.start),t=new Date(t.end);e.startDate=a,e.endDate=t,this.handleZoom(e)},handleZoom:function(t){this.zoomChart(t.startDate,t.endDate)},zoomChart:function(t,e){var a=new Date(t),i=this,s=i.firstDate,r=i.lastDate,o=i.currentPeriod,n=i.categoryAxesSettings,h=n.minPeriod,l=i.panelsSettings,d=i.periodSelector,c=i.panels,p=i.comparedGraphs,m=i.scrollbarChart,u=i.firstDayOfWeek;if(s&&r){if(t||(t=s),e||(e=r),o){var g=AmCharts.extractPeriod(o);t.getTime()==e.getTime()&&g!=h&&(e=AmCharts.changeDate(e,g.period,g.count),e.setTime(e.getTime()-1))}t.getTime()<s.getTime()&&(t=s),t.getTime()>r.getTime()&&(t=r),e.getTime()<s.getTime()&&(e=s),e.getTime()>r.getTime()&&(e=r),g=AmCharts.getItemIndex(h,n.groupToPeriods),n=o,o=i.choosePeriod(g,t,e),i.currentPeriod=o;var g=AmCharts.extractPeriod(o),C=AmCharts.getPeriodDuration(g.period,g.count);for(AmCharts.getPeriodDuration(h),1>e.getTime()-t.getTime()&&(t=new Date(e.getTime()-1)),h=AmCharts.newDate(t),i.extendToFullPeriod&&(h.getTime()-s.getTime()<.1*C&&(h=AmCharts.resetDateToMin(t,g.period,g.count,u)),r.getTime()-e.getTime()<.1*C&&(e=AmCharts.resetDateToMin(r,g.period,g.count,u),e=AmCharts.changeDate(e,g.period,g.count,!0))),s=0;s<c.length;s++)r=c[s],r.chartCursor&&r.chartCursor.panning&&(h=a);for(s=0;s<c.length;s++){if(r=c[s],o!=n){for(a=0;a<p.length;a++)C=p[a].graph,C.dataProvider=C.dataSet.agregatedDataProviders[o];a=r.categoryAxis,a.firstDayOfWeek=u,a.minPeriod=o,r.dataProvider=i.mainDataSet.agregatedDataProviders[o],(a=r.chartCursor)&&(a.categoryBalloonDateFormat=i.chartCursorSettings.categoryBalloonDateFormat(g.period),r.showCategoryAxis||(a.categoryBalloonEnabled=!1)),r.startTime=h.getTime(),r.endTime=e.getTime(),r.validateData(!0)}a=!1,r.chartCursor&&r.chartCursor.panning&&(a=!0),a||(r.startTime=void 0,r.endTime=void 0,r.zoomToDates(h,e)),0<l.startDuration&&i.animationPlayed&&!a?(r.startDuration=0,r.animateAgain()):0<l.startDuration&&!a&&r.animateAgain()}i.animationPlayed=!0,AmCharts.extractPeriod(o),l=new Date(e),m&&i.updateScrollbar&&(m.zoomToDates(t,l),i.skipScrollbarEvent=!0,setTimeout(function(){i.resetSkip.call(i)},100)),i.updateScrollbar=!0,i.startDate=t,i.endDate=e,d&&d.zoom(t,e),(t.getTime()!=i.previousStartDate.getTime()||e.getTime()!=i.previousEndDate.getTime())&&(d={type:"zoomed"},d.startDate=t,d.endDate=e,d.chart=i,d.period=o,i.fire(d.type,d),i.previousStartDate=new Date(t),i.previousEndDate=new Date(e))}i.eventsHidden&&i.showHideEvents(!1),i.chartCreated||(o="init",i.fire(o,{type:o,chart:i})),i.chartRendered||(o="rendered",i.fire(o,{type:o,chart:i}),i.chartRendered=!0),o="drawn",i.fire(o,{type:o,chart:i}),i.chartCreated=!0,i.animationPlayed=!0},resetSkip:function(){this.skipScrollbarEvent=!1},updateGraphs:function(){if(this.getSelections(),0<this.dataSets.length){var t=this.panels;this.comparedGraphs=[];var e;for(e=0;e<t.length;e++){var a,i=t[e],s=i.valueAxes;for(a=0;a<s.length;a++){var r=s[a];r.prevLog&&(r.logarithmic=r.prevLog),r.recalculateToPercents="always"==i.recalculateToPercents?!0:!1}s=this.mainDataSet,a=this.comparedDataSets,r=i.stockGraphs,i.graphs=[];var o;for(o=0;o<r.length;o++){var n=r[o],n=AmCharts.processObject(n,AmCharts.StockGraph,this.theme);r[o]=n,(!n.title||n.resetTitleOnDataSetChange)&&(n.title=s.title,n.resetTitleOnDataSetChange=!0),n.useDataSetColors&&(n.lineColor=s.color,n.fillColors=void 0,n.bulletColor=void 0);var h,l=!1,d=s.fieldMappings;for(h=0;h<d.length;h++){var c=d[h],p=n.valueField;p&&c.toField==p&&(l=!0),(p=n.openField)&&c.toField==p&&(l=!0),(p=n.closeField)&&c.toField==p&&(l=!0),(p=n.lowField)&&c.toField==p&&(l=!0)}l&&i.addGraph(n),p=!1,"always"==i.recalculateToPercents&&(p=!0);var m,u,g,C,v=i.stockLegend;if(v&&(v=AmCharts.processObject(v,AmCharts.StockLegend,this.theme),i.stockLegend=v,m=v.valueTextComparing,u=v.valueTextRegular,g=v.periodValueTextComparing,C=v.periodValueTextRegular),n.comparable){var f=a.length;f>0&&n.valueAxis.logarithmic&&"never"!=i.recalculateToPercents&&(n.valueAxis.logarithmic=!1,n.valueAxis.prevLog=!0),f>0&&"whenComparing"==i.recalculateToPercents&&(n.valueAxis.recalculateToPercents=!0),v&&n.valueAxis&&!0===n.valueAxis.recalculateToPercents&&(p=!0);var A;for(A=0;f>A;A++){var S=a[A],D=n.comparedGraphs[S.id];D||(D=new AmCharts.AmGraph(this.theme),D.id="comparedGraph"+A+"_"+o+S.id),D.periodValue=n.periodValue,D.dataSet=S,D.behindColumns=n.behindColumns,n.comparedGraphs[S.id]=D,D.seriesIdField="amCategoryIdField",D.connect=n.connect;var b=n.compareField;for(b||(b=n.valueField),l=!1,d=S.fieldMappings,h=0;h<d.length;h++)c=d[h],c.toField==b&&(l=!0);l&&(D.valueField=b,D.title=S.title,D.lineColor=S.color,n.compareGraphType&&(D.type=n.compareGraphType),l=n.compareGraphLineThickness,isNaN(l)||(D.lineThickness=l),l=n.compareGraphDashLength,isNaN(l)||(D.dashLength=l),l=n.compareGraphLineAlpha,isNaN(l)||(D.lineAlpha=l),l=n.compareGraphCornerRadiusTop,isNaN(l)||(D.cornerRadiusTop=l),l=n.compareGraphCornerRadiusBottom,isNaN(l)||(D.cornerRadiusBottom=l),l=n.compareGraphBalloonColor,isNaN(l)||(D.balloonColor=l),l=n.compareGraphBulletColor,isNaN(l)||(D.bulletColor=l),(l=n.compareGraphFillColors)&&(D.fillColors=l),(l=n.compareGraphNegativeFillColors)&&(D.negativeFillColors=l),(l=n.compareGraphFillAlphas)&&(D.fillAlphas=l),(l=n.compareGraphNegativeFillAlphas)&&(D.negativeFillAlphas=l),(l=n.compareGraphBullet)&&(D.bullet=l),(l=n.compareGraphNumberFormatter)&&(D.numberFormatter=l),l=n.compareGraphPrecision,isNaN(l)||(D.precision=l),(l=n.compareGraphBalloonText)&&(D.balloonText=l),l=n.compareGraphBulletSize,isNaN(l)||(D.bulletSize=l),l=n.compareGraphBulletAlpha,isNaN(l)||(D.bulletAlpha=l),l=n.compareGraphBulletBorderAlpha,isNaN(l)||(D.bulletBorderAlpha=l),(l=n.compareGraphBulletBorderColor)&&(D.bulletBorderColor=l),l=n.compareGraphBulletBorderThickness,isNaN(l)||(D.bulletBorderThickness=l),D.visibleInLegend=n.compareGraphVisibleInLegend,D.balloonFunction=n.compareGraphBalloonFunction,D.hideBulletsCount=n.hideBulletsCount,D.valueAxis=n.valueAxis,v&&(p&&m?(D.legendValueText=m,D.legendPeriodValueText=g):(u&&(D.legendValueText=u),D.legendPeriodValueText=C)),i.showComparedOnTop?i.graphs.push(D):i.graphs.unshift(D),this.comparedGraphs.push({graph:D,dataSet:S}))}}v&&(p&&m?(n.legendValueText=m,n.legendPeriodValueText=g):(u&&(n.legendValueText=u),n.legendPeriodValueText=C))}}}},choosePeriod:function(t,e,a){var i=this.categoryAxesSettings,s=i.groupToPeriods,r=s[t],s=s[t+1],o=AmCharts.extractPeriod(r),o=AmCharts.getPeriodDuration(o.period,o.count),n=e.getTime(),h=a.getTime(),i=i.maxSeries;return(h-n)/o>i&&i>0&&s?this.choosePeriod(t+1,e,a):r},handleCursorChange:function(t){var e=t.target,a=t.position,i=t.zooming;t=t.index;var s,r=this.chartCursors;for(s=0;s<r.length;s++){var o=r[s];o!=e&&a&&(o.isZooming(i),o.previousMousePosition=0/0,o.forceShow=!0,o.initialMouse=e.initialMouse,o.selectionPosX=e.selectionPosX,o.setPosition(a,!1,t))}},getSelections:function(){var t,e=[],a=this.dataSets;for(t=0;t<a.length;t++){var i=a[t];i.compared&&e.push(i)}for(this.comparedDataSets=e,a=this.panels,t=0;t<a.length;t++)i=a[t],"never"!=i.recalculateToPercents&&0<e.length?i.hideDrawingIcons(!0):i.drawingIconsEnabled&&i.hideDrawingIcons(!1)},addPanel:function(t){this.panels.push(t),AmCharts.removeChart(t),AmCharts.addChart(t)},addPanelAt:function(t,e){this.panels.splice(e,0,t),AmCharts.removeChart(t),AmCharts.addChart(t)},removePanel:function(t){var e,a=this.panels;for(e=a.length-1;e>=0;e--)if(a[e]==t){var i={type:"panelRemoved",panel:t,chart:this};this.fire(i.type,i),a.splice(e,1),t.destroy(),t.clear()}},validateData:function(){this.resetDataParsed(),this.updateDataSets(),this.mainDataSet.compared=!1,this.updateGraphs(),this.updateData();var t=this.dataSetSelector;t&&t.write(t.div)},resetDataParsed:function(){var t,e=this.dataSets;for(t=0;t<e.length;t++)e[t].dataParsed=!1},validateNow:function(){this.skipDefault=!0,this.chartRendered=!1,this.clear(!0),this.write(this.div)},hideStockEvents:function(){this.showHideEvents(!1),this.eventsHidden=!0},showStockEvents:function(){this.showHideEvents(!0),this.eventsHidden=!1},showHideEvents:function(t){var e,a=this.panels;for(e=0;e<a.length;e++){var i,s=a[e].graphs;for(i=0;i<s.length;i++){var r=s[i];!0===t?r.showBullets():r.hideBullets()}}},invalidateSize:function(){var t=this;clearTimeout(t.validateTO);var e=setTimeout(function(){t.validateNow()},5);t.validateTO=e},measure:function(){var t=this.div,e=t.offsetWidth,a=t.offsetHeight;t.clientHeight&&(e=t.clientWidth,a=t.clientHeight),this.divRealWidth=e,this.divRealHeight=a},clear:function(t){var e,a=this.panels;if(a)for(e=0;e<a.length;e++){var i=a[e];t||(i.cleanChart(),i.destroy()),i.clear(t)}(a=this.scrollbarChart)&&a.clear(),(a=this.div)&&(a.innerHTML=""),t||(this.div=null,AmCharts.deleteObject(this))}}),AmCharts.StockEvent=AmCharts.Class({construct:function(){}}),AmCharts.DataSet=AmCharts.Class({construct:function(){this.cname="DataSet",this.fieldMappings=[],this.dataProvider=[],this.agregatedDataProviders=[],this.stockEvents=[],this.compared=!1,this.showInCompare=this.showInSelect=!0}}),AmCharts.PeriodSelector=AmCharts.Class({construct:function(t){this.cname="PeriodSelector",this.theme=t,this.createEvents("changed"),this.inputFieldsEnabled=!0,this.position="bottom",this.width=180,this.fromText="From: ",this.toText="to: ",this.periodsText="Zoom: ",this.periods=[],this.inputFieldWidth=100,this.dateFormat="DD-MM-YYYY",this.hideOutOfScopePeriods=!0,AmCharts.applyTheme(this,t,this.cname)},zoom:function(t,e){var a=this.chart;this.inputFieldsEnabled&&(this.startDateField.value=AmCharts.formatDate(t,this.dateFormat,a),this.endDateField.value=AmCharts.formatDate(e,this.dateFormat,a)),this.markButtonAsSelected()},write:function(t){var e=this;t.className="amChartsPeriodSelector";var a=e.width,i=e.position;e.width=void 0,e.position=void 0,AmCharts.applyStyles(t.style,e),e.width=a,e.position=i,e.div=t,t.innerHTML="",a=e.theme,i=e.position,i="top"==i||"bottom"==i?!1:!0,e.vertical=i;var s=0,r=0;if(e.inputFieldsEnabled){var o=document.createElement("div");t.appendChild(o);var n=document.createTextNode(AmCharts.lang.fromText||e.fromText);o.appendChild(n),i?AmCharts.addBr(o):(o.style.styleFloat="left",o.style.display="inline");var h=document.createElement("input");if(h.className="amChartsInputField",a&&AmCharts.applyStyles(h.style,a.PeriodInputField),h.style.textAlign="center",h.onblur=function(t){e.handleCalChange(t)},AmCharts.isNN&&h.addEventListener("keypress",function(t){e.handleCalendarChange.call(e,t)},!0),AmCharts.isIE&&h.attachEvent("onkeypress",function(t){e.handleCalendarChange.call(e,t)}),o.appendChild(h),e.startDateField=h,i)n=e.width-6+"px",AmCharts.addBr(o);else{var n=e.inputFieldWidth+"px",l=document.createTextNode(" ");o.appendChild(l)}h.style.width=n,h=document.createTextNode(AmCharts.lang.toText||e.toText),o.appendChild(h),i&&AmCharts.addBr(o),h=document.createElement("input"),h.className="amChartsInputField",a&&AmCharts.applyStyles(h.style,a.PeriodInputField),h.style.textAlign="center",h.onblur=function(){e.handleCalChange()},AmCharts.isNN&&h.addEventListener("keypress",function(t){e.handleCalendarChange.call(e,t)},!0),AmCharts.isIE&&h.attachEvent("onkeypress",function(t){e.handleCalendarChange.call(e,t)}),o.appendChild(h),e.endDateField=h,i?AmCharts.addBr(o):s=h.offsetHeight+2,n&&(h.style.width=n)}if(o=e.periods,AmCharts.ifArray(o)){n=document.createElement("div"),i||(n.style.cssFloat="right",n.style.styleFloat="right",n.style.display="inline"),t.appendChild(n),i&&AmCharts.addBr(n),t=document.createTextNode(AmCharts.lang.periodsText||e.periodsText),n.appendChild(t),e.periodContainer=n;var d;for(t=0;t<o.length;t++)h=o[t],d=document.createElement("input"),d.type="button",d.value=h.label,d.period=h.period,d.count=h.count,d.periodObj=h,d.className="amChartsButton",a&&AmCharts.applyStyles(d.style,a.PeriodButton),i&&(d.style.width=e.width-1+"px"),d.style.boxSizing="border-box",n.appendChild(d),e.addEventListeners(d),h.button=d;!i&&d&&(r=d.offsetHeight),e.offsetHeight=Math.max(s,r)}},addEventListeners:function(t){var e=this;AmCharts.isNN&&t.addEventListener("click",function(t){e.handlePeriodChange.call(e,t)},!0),AmCharts.isIE&&t.attachEvent("onclick",function(t){e.handlePeriodChange.call(e,t)})},getPeriodDates:function(){var t,e=this.periods;for(t=0;t<e.length;t++)this.selectPeriodButton(e[t],!0)},handleCalendarChange:function(t){13==t.keyCode&&this.handleCalChange(t)},handleCalChange:function(t){var e=this.dateFormat,a=AmCharts.stringToDate(this.startDateField.value,e),e=this.chart.getLastDate(AmCharts.stringToDate(this.endDateField.value,e));try{this.startDateField.blur(),this.endDateField.blur()}catch(i){}if(a&&e){var s={type:"changed"};s.startDate=a,s.endDate=e,s.chart=this.chart,s.event=t,this.fire(s.type,s)}},handlePeriodChange:function(t){this.selectPeriodButton((t.srcElement?t.srcElement:t.target).periodObj,!1,t)},setRanges:function(t,e){this.firstDate=t,this.lastDate=e,this.getPeriodDates()},selectPeriodButton:function(t,e,a){var i,s,r,o=t.button,n=o.count,h=o.period,l=this.firstDate,d=this.lastDate,c=this.theme;l&&d&&("MAX"==h?(i=l,s=d):"YTD"==h?(i=new Date,i.setMonth(0,1),i.setHours(0,0,0,0),0===n&&i.setDate(i.getDate()-1),s=this.lastDate):"YYYY"==h||"MM"==h?this.selectFromStart?(i=l,s=new Date(l),s.setMonth(s.getMonth()+n)):(i=new Date(d),AmCharts.changeDate(i,h,n,!1),i.setDate(i.getDate()-1),s=d):(r=AmCharts.getPeriodDuration(h,n),this.selectFromStart?(i=l,s=new Date(l.getTime()+r-1)):(i=new Date(d.getTime()-r+1),s=d)),t.startTime=i.getTime(),this.hideOutOfScopePeriods&&(o.style.display=e&&t.startTime<l.getTime()?"none":"inline"),i.getTime()>d.getTime()&&(r=AmCharts.getPeriodDuration("DD",1),i=new Date(d.getTime()-r)),i.getTime()<l.getTime()&&(i=l),"YTD"==h&&(t.startTime=i.getTime()),t.endTime=s.getTime(),e||(this.skipMark=!0,this.unselectButtons(),o.className="amChartsButtonSelected",c&&AmCharts.applyStyles(o.style,c.PeriodButtonSelected),t={type:"changed"},t.startDate=i,t.endDate=s,t.predefinedPeriod=h,t.chart=this.chart,t.count=n,t.event=a,this.fire(t.type,t)))},markButtonAsSelected:function(){if(!this.skipMark){var t=this.chart,e=this.periods,a=t.startDate.getTime(),t=t.endDate.getTime(),i=this.lastDate.getTime();t>i&&(t=i),i=this.theme,this.unselectButtons();var s;for(s=e.length-1;s>=0;s--){var r=e[s],o=r.button;r.startTime&&r.endTime&&a==r.startTime&&t==r.endTime&&(this.unselectButtons(),o.className="amChartsButtonSelected",i&&AmCharts.applyStyles(o.style,i.PeriodButtonSelected))}}this.skipMark=!1},unselectButtons:function(){var t,e=this.periods,a=this.theme;for(t=e.length-1;t>=0;t--){var i=e[t].button;i.className="amChartsButton",a&&AmCharts.applyStyles(i.style,a.PeriodButton)}},setDefaultPeriod:function(){var t,e=this.periods;for(t=0;t<e.length;t++){var a=e[t];a.selected&&this.selectPeriodButton(a)}}}),AmCharts.StockGraph=AmCharts.Class({inherits:AmCharts.AmGraph,construct:function(t){AmCharts.StockGraph.base.construct.call(this,t),this.cname="StockGraph",this.useDataSetColors=!0,this.periodValue="Close",this.compareGraphType="line",this.compareGraphVisibleInLegend=!0,this.comparable=this.resetTitleOnDataSetChange=!1,this.comparedGraphs={},this.showEventsOnComparedGraphs=!1,AmCharts.applyTheme(this,t,this.cname)}}),AmCharts.StockPanel=AmCharts.Class({inherits:AmCharts.AmSerialChart,construct:function(t){AmCharts.StockPanel.base.construct.call(this,t),this.cname="StockPanel",this.theme=t,this.showCategoryAxis=this.showComparedOnTop=!0,this.recalculateToPercents="whenComparing",this.panelHeaderPaddingBottom=this.panelHeaderPaddingLeft=this.panelHeaderPaddingRight=this.panelHeaderPaddingTop=0,this.trendLineAlpha=1,this.trendLineColor="#00CC00",this.trendLineColorHover="#CC0000",this.trendLineThickness=2,this.trendLineDashLength=0,this.stockGraphs=[],this.drawingIconsEnabled=!1,this.iconSize=18,this.autoMargins=this.allowTurningOff=this.eraseAll=this.erasingEnabled=this.drawingEnabled=!1,AmCharts.applyTheme(this,t,this.cname)},initChart:function(t){AmCharts.StockPanel.base.initChart.call(this,t),this.drawingIconsEnabled&&this.createDrawIcons(),(t=this.chartCursor)&&this.listenTo(t,"draw",this.handleDraw)},addStockGraph:function(t){return this.stockGraphs.push(t),t},removeStockGraph:function(t){var e,a=this.stockGraphs;for(e=a.length-1;e>=0;e--)a[e]==t&&a.splice(e,1)},createDrawIcons:function(){var t=this,e=t.iconSize,a=t.container,i=t.pathToImages,s=t.realWidth-2*e-1-t.marginRight,r=AmCharts.rect(a,e,e,"#000",.005),o=AmCharts.rect(a,e,e,"#000",.005);o.translate(e+1,0);var n=a.image(i+"pencilIcon.gif",0,0,e,e);t.pencilButton=n,o.setAttr("cursor","pointer"),r.setAttr("cursor","pointer"),r.mouseup(function(){t.handlePencilClick()});var h=a.image(i+"pencilIconH.gif",0,0,e,e);t.pencilButtonPushed=h,t.drawingEnabled||h.hide();var l=a.image(i+"eraserIcon.gif",e+1,0,e,e);t.eraserButton=l,o.mouseup(function(){t.handleEraserClick()}),r.touchend&&(r.touchend(function(){t.handlePencilClick()}),o.touchend(function(){t.handleEraserClick()})),e=a.image(i+"eraserIconH.gif",e+1,0,e,e),t.eraserButtonPushed=e,t.erasingEnabled||e.hide(),a=a.set([n,h,l,e,r,o]),a.translate(s,1),this.hideIcons&&a.hide()},handlePencilClick:function(){var t=!this.drawingEnabled;this.disableDrawing(!t),this.erasingEnabled=!1;var e=this.eraserButtonPushed;e&&e.hide(),e=this.pencilButtonPushed,t?e&&e.show():(e&&e.hide(),this.setMouseCursor("auto"))},disableDrawing:function(t){this.drawingEnabled=!t;var e=this.chartCursor;this.stockChart.enableCursors(t),e&&e.enableDrawing(!t)},handleEraserClick:function(){this.disableDrawing(!0);var t=this.pencilButtonPushed;if(t&&t.hide(),t=this.eraserButtonPushed,this.eraseAll){var e,t=this.trendLines;for(e=t.length-1;e>=0;e--){var a=t[e];a.isProtected||this.removeTrendLine(a)
}this.validateNow()}else(this.erasingEnabled=e=!this.erasingEnabled)?(t&&t.show(),this.setTrendColorHover(this.trendLineColorHover),this.setMouseCursor("auto")):(t&&t.hide(),this.setTrendColorHover())},setTrendColorHover:function(t){var e,a=this.trendLines;for(e=a.length-1;e>=0;e--){var i=a[e];i.isProtected||(i.rollOverColor=t)}},handleDraw:function(t){var e=this.drawOnAxis;AmCharts.isString(e)&&(e=this.getValueAxisById(e)),e||(e=this.valueAxes[0]),this.drawOnAxis=e;var a=this.categoryAxis,i=t.initialX,s=t.finalX,r=t.initialY;t=t.finalY;var o=new AmCharts.TrendLine(this.theme);o.initialDate=a.coordinateToDate(i),o.finalDate=a.coordinateToDate(s),o.initialValue=e.coordinateToValue(r),o.finalValue=e.coordinateToValue(t),o.lineAlpha=this.trendLineAlpha,o.lineColor=this.trendLineColor,o.lineThickness=this.trendLineThickness,o.dashLength=this.trendLineDashLength,o.valueAxis=e,o.categoryAxis=a,this.addTrendLine(o),this.listenTo(o,"click",this.handleTrendClick),this.validateNow()},hideDrawingIcons:function(t){(this.hideIcons=t)&&this.disableDrawing(t)},handleTrendClick:function(t){this.erasingEnabled&&(t=t.trendLine,this.eraseAll||t.isProtected||this.removeTrendLine(t),this.validateNow())},handleWheelReal:function(t,e){var a=this.scrollbarChart;if(!this.wheelBusy&&a){var i=1;e&&(i=-1);var a=a.chartScrollbar,s=this.categoryAxis.minDuration();0>t?(i=this.startTime+i*s,s=this.endTime+1*s):(i=this.startTime-i*s,s=this.endTime-1*s),i<this.firstTime&&(i=this.firstTime),s>this.lastTime&&(s=this.lastTime),s>i&&a.timeZoom(i,s,!0)}}}),AmCharts.CategoryAxesSettings=AmCharts.Class({construct:function(t){this.cname="CategoryAxesSettings",this.minPeriod="DD",this.equalSpacing=!1,this.axisHeight=28,this.tickLength=this.axisAlpha=0,this.gridCount=10,this.maxSeries=150,this.groupToPeriods="ss 10ss 30ss mm 10mm 30mm hh DD WW MM YYYY".split(" "),this.markPeriodChange=this.autoGridCount=!0,AmCharts.applyTheme(this,t,this.cname)}}),AmCharts.ChartCursorSettings=AmCharts.Class({construct:function(t){this.cname="ChartCursorSettings",this.enabled=!0,this.bulletsEnabled=this.valueBalloonsEnabled=!1,this.categoryBalloonDateFormats=[{period:"YYYY",format:"YYYY"},{period:"MM",format:"MMM, YYYY"},{period:"WW",format:"MMM DD, YYYY"},{period:"DD",format:"MMM DD, YYYY"},{period:"hh",format:"JJ:NN"},{period:"mm",format:"JJ:NN"},{period:"ss",format:"JJ:NN:SS"},{period:"fff",format:"JJ:NN:SS"}],AmCharts.applyTheme(this,t,this.cname)},categoryBalloonDateFormat:function(t){var e,a,i=this.categoryBalloonDateFormats;for(a=0;a<i.length;a++)i[a].period==t&&(e=i[a].format);return e}}),AmCharts.ChartScrollbarSettings=AmCharts.Class({construct:function(t){this.cname="ChartScrollbarSettings",this.height=40,this.enabled=!0,this.color="#FFFFFF",this.updateOnReleaseOnly=this.autoGridCount=!0,this.hideResizeGrips=!1,this.position="bottom",this.minDistance=1,AmCharts.applyTheme(this,t,this.cname)}}),AmCharts.LegendSettings=AmCharts.Class({construct:function(t){this.cname="LegendSettings",this.marginBottom=this.marginTop=0,this.usePositiveNegativeOnPercentsOnly=!0,this.positiveValueColor="#00CC00",this.negativeValueColor="#CC0000",this.autoMargins=this.equalWidths=this.textClickEnabled=!1,AmCharts.applyTheme(this,t,this.cname)}}),AmCharts.PanelsSettings=AmCharts.Class({construct:function(t){this.cname="PanelsSettings",this.marginBottom=this.marginTop=this.marginRight=this.marginLeft=0,this.backgroundColor="#FFFFFF",this.backgroundAlpha=0,this.panelSpacing=8,this.panEventsEnabled=!0,this.creditsPosition="top-right",AmCharts.applyTheme(this,t,this.cname)}}),AmCharts.StockEventsSettings=AmCharts.Class({construct:function(t){this.cname="StockEventsSettings",this.type="sign",this.backgroundAlpha=1,this.backgroundColor="#DADADA",this.borderAlpha=1,this.borderColor="#888888",this.balloonColor=this.rollOverColor="#CC0000",AmCharts.applyTheme(this,t,this.cname)}}),AmCharts.ValueAxesSettings=AmCharts.Class({construct:function(t){this.cname="ValueAxesSettings",this.tickLength=0,this.showFirstLabel=this.autoGridCount=this.inside=!0,this.showLastLabel=!1,this.axisAlpha=0,AmCharts.applyTheme(this,t,this.cname)}}),AmCharts.getItemIndex=function(t,e){var a,i=-1;for(a=0;a<e.length;a++)t==e[a]&&(i=a);return i},AmCharts.addBr=function(t){t.appendChild(document.createElement("br"))},AmCharts.applyStyles=function(t,e){if(e&&t)for(var a in t){var i=a,s=e[i];if(void 0!==s)try{t[i]=s}catch(r){}}},AmCharts.parseStockData=function(t,e,a,i,s){(new Date).getTime();var r={},o=t.dataProvider,n=t.categoryField;if(n){var h,l,d=AmCharts.getItemIndex(e,a),c=a.length,p=o.length,m={};for(h=d;c>h;h++)l=a[h],r[l]=[];var u={},g=t.fieldMappings,C=g.length;for(h=0;p>h;h++){var v=o[h],f=v[n],f=f instanceof Date?AmCharts.newDate(f,e):s?AmCharts.stringToDate(f,s):new Date(f),A=f.getTime(),S={};for(l=0;C>l;l++)S[g[l].toField]=v[g[l].fromField];var D;for(D=d;c>D;D++){l=a[D];var b,y,w=AmCharts.extractPeriod(l),T=w.period,x=w.count;if(D==d||A>=m[l]||!m[l]){u[l]={},u[l].amCategoryIdField=String(AmCharts.resetDateToMin(f,T,x,i).getTime());var P;for(P=0;C>P;P++)w=g[P].toField,b=u[l],y=Number(S[w]),b[w+"Count"]=0,b[w+"Sum"]=0,isNaN(y)||(b[w+"Open"]=y,b[w+"Sum"]=y,b[w+"High"]=y,b[w+"Low"]=y,b[w+"Close"]=y,b[w+"Count"]=1,b[w+"Average"]=y);if(b.dataContext=v,r[l].push(u[l]),D>d&&(w=AmCharts.newDate(f,e),w=AmCharts.changeDate(w,T,x,!0),w=AmCharts.resetDateToMin(w,T,x,i),m[l]=w.getTime()),D==d)for(var k in v)v.hasOwnProperty(k)&&(u[l][k]=v[k]);u[l][n]=AmCharts.newDate(f,e)}else for(T=0;C>T;T++)w=g[T].toField,b=u[l],h==p-1&&(b[n]=AmCharts.newDate(f,e)),y=Number(S[w]),isNaN(y)||(isNaN(b[w+"Low"])&&(b[w+"Low"]=y),y<b[w+"Low"]&&(b[w+"Low"]=y),isNaN(b[w+"High"])&&(b[w+"High"]=y),y>b[w+"High"]&&(b[w+"High"]=y),b[w+"Close"]=y,x=AmCharts.getDecimals(b[w+"Sum"]),P=AmCharts.getDecimals(y),b[w+"Sum"]+=y,b[w+"Sum"]=AmCharts.roundTo(b[w+"Sum"],Math.max(x,P)),b[w+"Count"]++,b[w+"Average"]=b[w+"Sum"]/b[w+"Count"])}}}t.agregatedDataProviders=r},AmCharts.parseEvents=function(t,e,a,i,s,r){var o,n,h,l,d,c,p,m,u=t.stockEvents,g=t.agregatedDataProviders,C=e.length;for(o=0;C>o;o++){c=e[o],d=c.graphs,h=d.length;var v;for(n=0;h>n;n++)l=d[n],l.customBulletField="amCustomBullet"+l.id+"_"+c.id,l.bulletConfigField="amCustomBulletConfig"+l.id+"_"+c.id;for(var f=0;f<u.length;f++)p=u[f],v=p.graph,AmCharts.isString(v)&&(v=AmCharts.getObjById(d,v))&&(p.graph=v)}for(var A in g)if(g.hasOwnProperty(A)){v=g[A];var S,D=AmCharts.extractPeriod(A),b=v.length;for(S=0;b>S;S++){var y=v[S];o=y[t.categoryField],m=o instanceof Date,r&&!m&&(o=AmCharts.stringToDate(o,r));var w=o.getTime();d=D.period;var T,f=D.count;for(T="fff"==d?o.getTime()+1:AmCharts.resetDateToMin(AmCharts.changeDate(new Date(o),D.period,D.count),d,f,i).getTime(),o=0;C>o;o++)for(c=e[o],d=c.graphs,h=d.length,n=0;h>n;n++){l=d[n];var x={};for(x.eventDispatcher=s,x.eventObjects=[],x.letters=[],x.descriptions=[],x.shapes=[],x.backgroundColors=[],x.backgroundAlphas=[],x.borderColors=[],x.borderAlphas=[],x.colors=[],x.rollOverColors=[],x.showOnAxis=[],x.values=[],x.showAts=[],f=0;f<u.length;f++){p=u[f],m=p.date instanceof Date,r&&!m&&(p.date=AmCharts.stringToDate(p.date,r)),m=p.date.getTime();var P=!1;p.graph&&(p.graph.showEventsOnComparedGraphs&&p.graph.comparedGraphs[t.id]&&(P=!0),(l==p.graph||P)&&m>=w&&T>m&&(x.eventObjects.push(p),x.letters.push(p.text),x.descriptions.push(p.description),x.shapes.push(p.type?p.type:a.type),x.backgroundColors.push(void 0!==p.backgroundColor?p.backgroundColor:a.backgroundColor),x.backgroundAlphas.push(isNaN(p.backgroundAlpha)?a.backgroundAlpha:p.backgroundAlpha),x.borderAlphas.push(isNaN(p.borderAlpha)?a.borderAlpha:p.borderAlpha),x.borderColors.push(void 0!==p.borderColor?p.borderColor:a.borderColor),x.rollOverColors.push(void 0!==p.rollOverColor?p.rollOverColor:a.rollOverColor),x.showAts.push(void 0!==p.showAt?p.showAt:a.showAt),x.colors.push(p.color),x.values.push(p.value),!p.panel&&p.graph&&(p.panel=p.graph.chart),x.showOnAxis.push(p.showOnAxis),x.date=new Date(p.date))),0<x.shapes.length&&(p="amCustomBullet"+l.id+"_"+c.id,m="amCustomBulletConfig"+l.id+"_"+c.id,y[p]=AmCharts.StackedBullet,y[m]=x)}}}}},AmCharts.StockLegend=AmCharts.Class({inherits:AmCharts.AmLegend,construct:function(t){AmCharts.StockLegend.base.construct.call(this,t),this.cname="StockLegend",this.valueTextComparing="[[percents.value]]%",this.valueTextRegular="[[value]]",AmCharts.applyTheme(this,t,this.cname)},drawLegend:function(){var t=this;AmCharts.StockLegend.base.drawLegend.call(t);var e=t.chart;if(e.allowTurningOff){var a=t.container,i=a.image(e.pathToImages+"xIcon.gif",e.realWidth-17,3,17,17),e=a.image(e.pathToImages+"xIconH.gif",e.realWidth-17,3,17,17);e.hide(),t.xButtonHover=e,i.mouseup(function(){t.handleXClick()}).mouseover(function(){t.handleXOver()}),e.mouseup(function(){t.handleXClick()}).mouseout(function(){t.handleXOut()})}},handleXOver:function(){this.xButtonHover.show()},handleXOut:function(){this.xButtonHover.hide()},handleXClick:function(){var t=this.chart,e=t.stockChart;e.removePanel(t),e.validateNow()}}),AmCharts.DataSetSelector=AmCharts.Class({construct:function(t){this.cname="DataSetSelector",this.theme=t,this.createEvents("dataSetSelected","dataSetCompared","dataSetUncompared"),this.position="left",this.selectText="Select:",this.comboBoxSelectText="Select...",this.compareText="Compare to:",this.width=180,this.dataProvider=[],this.listHeight=150,this.listCheckBoxSize=14,this.rollOverBackgroundColor="#b2e1ff",this.selectedBackgroundColor="#7fceff",AmCharts.applyTheme(this,t,this.cname)},write:function(t){var e,a=this,i=a.theme;t.className="amChartsDataSetSelector";var s=a.width;e=a.position,a.width=void 0,a.position=void 0,AmCharts.applyStyles(t.style,a),a.div=t,a.width=s,a.position=e,t.innerHTML="";var r,s=a.position;r="top"==s||"bottom"==s?!1:!0,a.vertical=r;var o;r&&(o=a.width+"px");var n,h,s=a.dataProvider;if(1<a.countDataSets("showInSelect")){e=document.createTextNode(AmCharts.lang.selectText||a.selectText),t.appendChild(e),r&&AmCharts.addBr(t);var l=document.createElement("select");for(o&&(l.style.width=o),a.selectCB=l,i&&AmCharts.applyStyles(l.style,i.DataSetSelect),t.appendChild(l),AmCharts.isNN&&l.addEventListener("change",function(t){a.handleDataSetChange.call(a,t)},!0),AmCharts.isIE&&l.attachEvent("onchange",function(t){a.handleDataSetChange.call(a,t)}),e=0;e<s.length;e++)if(n=s[e],!0===n.showInSelect){h=document.createElement("option"),h.text=n.title,h.value=e,n==a.chart.mainDataSet&&(h.selected=!0);try{l.add(h,null)}catch(d){l.add(h)}}a.offsetHeight=l.offsetHeight}if(0<a.countDataSets("showInCompare")&&1<s.length)if(r?(AmCharts.addBr(t),AmCharts.addBr(t)):(e=document.createTextNode(" "),t.appendChild(e)),e=document.createTextNode(AmCharts.lang.compareText||a.compareText),t.appendChild(e),h=a.listCheckBoxSize,r){for(AmCharts.addBr(t),o=document.createElement("div"),t.appendChild(o),o.className="amChartsCompareList",i&&AmCharts.applyStyles(o.style,i.DataSetCompareList),o.style.overflow="auto",o.style.overflowX="hidden",o.style.width=a.width-2+"px",o.style.maxHeight=a.listHeight+"px",e=0;e<s.length;e++)n=s[e],!0===n.showInCompare&&n!=a.chart.mainDataSet&&(i=document.createElement("div"),i.style.padding="4px",i.style.position="relative",i.name="amCBContainer",i.dataSet=n,i.style.height=h+"px",n.compared&&(i.style.backgroundColor=a.selectedBackgroundColor),o.appendChild(i),r=document.createElement("div"),r.style.width=h+"px",r.style.height=h+"px",r.style.position="absolute",r.style.backgroundColor=n.color,i.appendChild(r),r=document.createElement("div"),r.style.width="100%",r.style.position="absolute",r.style.left=h+10+"px",i.appendChild(r),n=document.createTextNode(n.title),r.style.whiteSpace="nowrap",r.style.cursor="default",r.appendChild(n),a.addEventListeners(i));AmCharts.addBr(t),AmCharts.addBr(t)}else{i=document.createElement("select"),a.compareCB=i,o&&(i.style.width=o),t.appendChild(i),AmCharts.isNN&&i.addEventListener("change",function(t){a.handleCBSelect.call(a,t)},!0),AmCharts.isIE&&i.attachEvent("onchange",function(t){a.handleCBSelect.call(a,t)}),h=document.createElement("option"),h.text=AmCharts.lang.comboBoxSelectText||a.comboBoxSelectText;try{i.add(h,null)}catch(c){i.add(h)}for(e=0;e<s.length;e++)if(n=s[e],!0===n.showInCompare&&n!=a.chart.mainDataSet){h=document.createElement("option"),h.text=n.title,h.value=e,n.compared&&(h.selected=!0);try{i.add(h,null)}catch(p){i.add(h)}}a.offsetHeight=i.offsetHeight}},addEventListeners:function(t){var e=this;AmCharts.isNN&&(t.addEventListener("mouseover",function(t){e.handleRollOver.call(e,t)},!0),t.addEventListener("mouseout",function(t){e.handleRollOut.call(e,t)},!0),t.addEventListener("click",function(t){e.handleClick.call(e,t)},!0)),AmCharts.isIE&&(t.attachEvent("onmouseout",function(t){e.handleRollOut.call(e,t)}),t.attachEvent("onmouseover",function(t){e.handleRollOver.call(e,t)}),t.attachEvent("onclick",function(t){e.handleClick.call(e,t)}))},handleDataSetChange:function(){var t=this.selectCB,t=this.dataProvider[t.options[t.selectedIndex].value],e=this.chart;e.mainDataSet=t,e.zoomOutOnDataSetChange&&(e.startDate=void 0,e.endDate=void 0),e.validateData(),t={type:"dataSetSelected",dataSet:t,chart:this.chart},this.fire(t.type,t)},handleRollOver:function(t){t=this.getRealDiv(t),t.dataSet.compared||(t.style.backgroundColor=this.rollOverBackgroundColor)},handleRollOut:function(t){t=this.getRealDiv(t),t.dataSet.compared||(t.style.removeProperty&&t.style.removeProperty("background-color"),t.style.removeAttribute&&t.style.removeAttribute("backgroundColor"))},handleCBSelect:function(t){var e,a,i=this.compareCB,s=this.dataProvider;for(e=0;e<s.length;e++)a=s[e],a.compared&&(t={type:"dataSetUncompared",dataSet:a}),a.compared=!1;s=i.selectedIndex,s>0&&(a=this.dataProvider[i.options[s].value],a.compared||(t={type:"dataSetCompared",dataSet:a}),a.compared=!0),i=this.chart,i.validateData(),t.chart=i,this.fire(t.type,t)},handleClick:function(t){t=this.getRealDiv(t).dataSet,!0===t.compared?(t.compared=!1,t={type:"dataSetUncompared",dataSet:t}):(t.compared=!0,t={type:"dataSetCompared",dataSet:t});var e=this.chart;e.validateData(),t.chart=e,this.fire(t.type,t)},getRealDiv:function(t){return t||(t=window.event),t=t.currentTarget?t.currentTarget:t.srcElement,"amCBContainer"==t.parentNode.name&&(t=t.parentNode),t},countDataSets:function(t){var e,a=this.dataProvider,i=0;for(e=0;e<a.length;e++)!0===a[e][t]&&i++;return i}}),AmCharts.StackedBullet=AmCharts.Class({construct:function(){this.fontSize=11,this.stackDown=!1,this.mastHeight=8,this.shapes=[],this.backgroundColors=[],this.backgroundAlphas=[],this.borderAlphas=[],this.borderColors=[],this.colors=[],this.rollOverColors=[],this.showOnAxiss=[],this.values=[],this.showAts=[],this.textColor="#000000",this.nextY=0,this.size=16},parseConfig:function(){var t=this.bulletConfig;this.eventObjects=t.eventObjects,this.letters=t.letters,this.shapes=t.shapes,this.backgroundColors=t.backgroundColors,this.backgroundAlphas=t.backgroundAlphas,this.borderColors=t.borderColors,this.borderAlphas=t.borderAlphas,this.colors=t.colors,this.rollOverColors=t.rollOverColors,this.date=t.date,this.showOnAxiss=t.showOnAxis,this.axisCoordinate=t.minCoord,this.showAts=t.showAts,this.values=t.values},write:function(t){if(this.parseConfig(),this.container=t,this.bullets=[],this.graph){var e=this.graph.fontSize;e&&(this.fontSize=e)}e=this.letters.length,(this.mastHeight+2*(this.fontSize/2+2))*e>this.availableSpace&&(this.stackDown=!0),this.set=t.set(),t=0;var a;for(a=0;e>a;a++)this.shape=this.shapes[a],this.backgroundColor=this.backgroundColors[a],this.backgroundAlpha=this.backgroundAlphas[a],this.borderAlpha=this.borderAlphas[a],this.borderColor=this.borderColors[a],this.rollOverColor=this.rollOverColors[a],this.showOnAxis=this.showOnAxiss[a],this.color=this.colors[a],this.value=this.values[a],this.showAt=this.showAts[a],this.addLetter(this.letters[a],t,a),this.showOnAxis||t++},addLetter:function(t,e,a){var i=this.container;e=i.set();var s=-1,r=this.stackDown,o=this.graph.valueAxis;this.showOnAxis&&(this.stackDown=o.reversed?!0:!1),this.stackDown&&(s=1);var n,h=0,l=0,d=0,c=this.fontSize,p=this.mastHeight,m=this.shape,u=this.textColor;void 0!==this.color&&(u=this.color),void 0===t&&(t=""),t=AmCharts.text(i,t,u,this.chart.fontFamily,this.fontSize),t.node.style.pointerEvents="none",i=t.getBBox(),this.labelWidth=u=i.width,this.labelHeight=i.height;var g,i=0;switch(m){case"sign":g=this.drawSign(e),h=p+4+c/2,i=p+c+4,1==s&&(h-=4);break;case"flag":g=this.drawFlag(e),l=u/2+3,h=p+4+c/2,i=p+c+4,1==s&&(h-=4);break;case"pin":g=this.drawPin(e),h=6+c/2,i=c+8;break;case"triangleUp":g=this.drawTriangleUp(e),h=-c-1,i=c+4,s=-1;break;case"triangleDown":g=this.drawTriangleDown(e),h=c+1,i=c+4,s=-1;break;case"triangleLeft":g=this.drawTriangleLeft(e),l=c,i=c+4,s=-1;break;case"triangleRight":g=this.drawTriangleRight(e),l=-c,s=-1,i=c+4;break;case"arrowUp":g=this.drawArrowUp(e),t.hide();break;case"arrowDown":g=this.drawArrowDown(e),t.hide(),i=c+4;break;case"text":s=-1,g=this.drawTextBackground(e,t),h=this.labelHeight+3,i=c+10;break;case"round":g=this.drawCircle(e)}this.bullets[a]=g,this.showOnAxis?(n=isNaN(this.nextAxisY)?this.axisCoordinate:this.nextY,d=h*s,this.nextAxisY=n+s*i):this.value?(n=this.value,o.recalculateToPercents&&(n=n/o.recBaseValue*100-100),n=o.getCoordinate(n)-this.bulletY,d=h*s):this.showAt?(g=this.graphDataItem.values,o.recalculateToPercents&&(g=this.graphDataItem.percents),g&&(n=o.getCoordinate(g[this.showAt])-this.bulletY,d=h*s)):(n=this.nextY,d=h*s),t.translate(l,d),e.push(t),e.translate(0,n),this.addEventListeners(e,a),this.nextY=n+s*i,this.stackDown=r},addEventListeners:function(t,e){var a=this;t.click(function(){a.handleClick(e)}).mouseover(function(){a.handleMouseOver(e)}).touchend(function(){a.handleMouseOver(e,!0)}).mouseout(function(){a.handleMouseOut(e)})},drawPin:function(t){var e=-1;this.stackDown&&(e=1);var a=this.fontSize+4;return this.drawRealPolygon(t,[0,a/2,a/2,-a/2,-a/2,0],[0,e*a/4,e*(a+a/4),e*(a+a/4),e*a/4,0])},drawSign:function(t){var e=-1;this.stackDown&&(e=1);var a=this.mastHeight*e,i=this.fontSize/2+2,s=AmCharts.line(this.container,[0,0],[0,a],this.borderColor,this.borderAlpha,1),r=AmCharts.circle(this.container,i,this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha);return r.translate(0,a+i*e),t.push(s),t.push(r),this.set.push(t),r},drawFlag:function(t){var e=-1;this.stackDown&&(e=1);var a=this.fontSize+4,i=this.labelWidth+6,s=this.mastHeight,e=1==e?e*s:e*s-a,s=AmCharts.line(this.container,[0,0],[0,e],this.borderColor,this.borderAlpha,1),a=AmCharts.polygon(this.container,[0,i,i,0],[0,0,a,a],this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha);return a.translate(0,e),t.push(s),t.push(a),this.set.push(t),a},drawTriangleUp:function(t){var e=this.fontSize+7;return this.drawRealPolygon(t,[0,e/2,-e/2,0],[0,e,e,0])},drawArrowUp:function(t){var e=this.size,a=e/2,i=e/4;return this.drawRealPolygon(t,[0,a,i,i,-i,-i,-a,0],[0,a,a,e,e,a,a,0])},drawArrowDown:function(t){var e=this.size,a=e/2,i=e/4;return this.drawRealPolygon(t,[0,a,i,i,-i,-i,-a,0],[0,-a,-a,-e,-e,-a,-a,0])},drawTriangleDown:function(t){var e=this.fontSize+7;return this.drawRealPolygon(t,[0,e/2,-e/2,0],[0,-e,-e,0])},drawTriangleLeft:function(t){var e=this.fontSize+7;return this.drawRealPolygon(t,[0,e,e,0],[0,-e/2,e/2])},drawTriangleRight:function(t){var e=this.fontSize+7;return this.drawRealPolygon(t,[0,-e,-e,0],[0,-e/2,e/2,0])},drawRealPolygon:function(t,e,a){return e=AmCharts.polygon(this.container,e,a,this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha),t.push(e),this.set.push(t),e},drawCircle:function(t){return shape=AmCharts.circle(this.container,this.fontSize/2,this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha),t.push(shape),this.set.push(t),shape},drawTextBackground:function(t,e){var a=e.getBBox(),i=-a.width/2-5,s=a.width/2+5,a=-a.height-12;return this.drawRealPolygon(t,[i,-5,0,5,s,s,i,i],[-5,-5,0,-5,-5,a,a,-5])},handleMouseOver:function(t,e){e||this.bullets[t].attr({fill:this.rollOverColors[t]});var a=this.eventObjects[t],i={type:"rollOverStockEvent",eventObject:a,graph:this.graph,date:this.date},s=this.bulletConfig.eventDispatcher;i.chart=s,s.fire(i.type,i),a.url&&this.bullets[t].setAttr("cursor","pointer"),this.chart.showBalloon(AmCharts.fixNewLines(a.description),s.stockEventsSettings.balloonColor,!0)},handleClick:function(t){t=this.eventObjects[t];var e={type:"clickStockEvent",eventObject:t,graph:this.graph,date:this.date},a=this.bulletConfig.eventDispatcher;e.chart=a,a.fire(e.type,e),e=t.urlTarget,e||(e=a.stockEventsSettings.urlTarget),AmCharts.getURL(t.url,e)},handleMouseOut:function(t){this.bullets[t].attr({fill:this.backgroundColors[t]}),t={type:"rollOutStockEvent",eventObject:this.eventObjects[t],graph:this.graph,date:this.date};var e=this.bulletConfig.eventDispatcher;t.chart=e,e.fire(t.type,t)}});